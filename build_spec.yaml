version: 0.1
component: build
timeoutInSeconds: 900
shell: bash
 
steps:
  - type: Command
    name: Instalar Node.js 20
    command: |
      curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
      apt-get install -y nodejs
      node -v
      npm -v
 
  - type: Command
    name: Limpiar caché y entorno
    command: |
      npm cache clean --force
      rm -rf node_modules package-lock.json
      npm install -g npm@latest
 
  - type: Command
    name: Instalar dependencias
    command: |
      npm install
      npm rebuild esbuild
 
  - type: Command
    name: Compilar aplicación Vite
    command: |
      npm run build
 
outputArtifacts:
  - name: ReactBuildOutput
    type: BINARY
    location: ./dist
